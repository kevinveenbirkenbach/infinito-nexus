# Encryptiom
TLS_ENABLED:              true          # Never set this to true, this just exist for development purposes
                                        # to deactivate TLS can also prevent the login function to work:
                                        # https://chatgpt.com/share/6979f774-81fc-800f-a674-6c59f1f03954
TLS_MODE:                 "letsencrypt" # Valid values letsencrypt, self_signed, off
TLS_SELFSIGNED_BASE_PATH: "/etc/{{ SOFTWARE_NAME | lower }}/selfsigned"
# Controls whether self-signed certs are generated per app ("app")
# or as one shared cert covering ALL domains across the global "domains" mapping ("global").
TLS_SELFSIGNED_SCOPE:     "global"

# Which ACME method to use: webroot, cloudflare, or hetzner
CERTBOT_ACME_CHALLENGE_METHOD:            "cloudflare"
CERTBOT_CREDENTIALS_DIR:                  /etc/certbot
CERTBOT_CREDENTIALS_FILE:                 "{{ CERTBOT_CREDENTIALS_DIR }}/{{ CERTBOT_ACME_CHALLENGE_METHOD }}.ini"
CERTBOT_DNS_PROPAGATION_WAIT_SECONDS:     300                     # How long should the script wait for DNS propagation before continuing
CERTBOT_FLAVOR:                           san                     # Possible options: san (recommended, with a dns flavor like cloudflare, or hetzner), wildcard(doesn't function with www redirect), dedicated

# Letsencrypt
LETSENCRYPT_WEBROOT_PATH: "/var/lib/letsencrypt/"             # Path where Certbot stores challenge webroot files
LETSENCRYPT_BASE_PATH:    "/etc/letsencrypt/"                 # Base directory containing Certbot configuration, account data, and archives
LETSENCRYPT_LIVE_PATH:    "{{ LETSENCRYPT_BASE_PATH }}live/"  # Symlink directory for the current active certificate and private key

CA_ROOT:
  base_dir:           "/etc/{{ SOFTWARE_NAME | lower }}/ca"
  cert_host:          "/etc/{{ SOFTWARE_NAME | lower }}/ca/root-ca.crt"
  key_host:           "/etc/{{ SOFTWARE_NAME | lower }}/ca/root-ca.key"
  openssl_conf_host:  "/etc/{{ SOFTWARE_NAME | lower }}/ca/openssl-root-ca.cnf"

  # Crypto defaults
  days:               3650
  key_bits:           4096

  # If true, delete key+cert and regenerate
  force_regen:        false

  # Subject defaults
  subject:
    C:   "DE"
    O:   "{{ DOMAIN_PRIMARY | default('Infinito.Nexus') }}"
    OU:  "Infinito.Nexus Root CA"
    CN:  "{{ DOMAIN_PRIMARY | default('infinito.local') }} Root CA"

CA_TRUST:
  cert_host:      "{{ CA_ROOT.cert_host }}"
  trust_name:     "{{ DOMAIN_PRIMARY | lower }}"
  wrapper_host:   "{{ PATH_CA_TRUST }}"
  inject_script:  "{{ PATH_CA_INJECT }}"
