---
# General
application_id:             "web-app-matomo"
database_type:              "mariadb"
domain:                     "{{ domains | get_domain(application_id) }}"

# Matomo

## Container 

## Application
MATOMO_SERVICE:             "matomo"
MATOMO_VERSION:             "{{ applications | get_app_conf(application_id, 'docker.services.matomo.version') }}"
MATOMO_IMAGE:               "{{ applications | get_app_conf(application_id, 'docker.services.matomo.image') }}"
MATOMO_NAME:                "{{ applications | get_app_conf(application_id, 'docker.services.matomo.name') }}"
MATOMO_DATA:                "{{ applications | get_app_conf(application_id, 'docker.volumes.data') }}"
MATOMO_CONFIG:              "/var/www/html/config/config.ini.php"

## Bootstrap
MATOMO_BOOTSTRAP_SERVICE:   "bootstrap"
MATOMO_BOOTSTRAP_PROFILE:   "{{ MATOMO_BOOTSTRAP_SERVICE }}"
MATOMO_BOOTSTRAP_IMAGE:     "{{ applications | get_app_conf(application_id, 'docker.services.bootstrap.image') }}"
MATOMO_BOOTSTRAP_VERSION:   "{{ applications | get_app_conf(application_id, 'docker.services.bootstrap.version') }}"
MATOMO_BOOTSTRAP_NAME:      "{{ applications | get_app_conf(application_id, 'docker.services.bootstrap.name') }}"
MATOMO_BOOTSTRAP_TIMEOUT:   "{{ applications | get_app_conf(application_id, 'docker.services.bootstrap.timeout') }}"
MATOMO_BOOTSTRAP_ENV_FILE:  "{{ [docker_compose.directories.env, MATOMO_BOOTSTRAP_SERVICE ~ '.env'] | path_join }}"

# Configuration
MATOMO_ADMIN_USER:          "{{ users.administrator.username }}"
MATOMO_ADMIN_PASSWORD:      "{{ users.administrator.password }}"
MATOMO_ADMIN_EMAIL:         "{{ users.administrator.email }}"
MATOMO_SITE_NAME:           "{{ applications | get_app_conf(application_id, 'site_name') }}"
MATOMO_EXCLUDED_IPS:        "{{ applications | get_app_conf(application_id, 'excluded_ips') }}"

# Token
MATOMO_TOKEN_DESCRIPTION:   "{{ applications | get_app_conf(application_id, 'token.description') }}"
matomo_token_value:         "{{ applications | get_app_conf(application_id, 'token.value') }}"

# Other Variables
MATOMO_INDEX_PHP_URL:       "{{ domains | get_url(application_id, WEB_PROTOCOL) }}/index.php"
