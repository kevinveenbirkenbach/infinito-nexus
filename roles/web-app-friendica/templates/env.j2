# The configuration options can be found here: 
# @see https://hub.docker.com/_/friendica

FRIENDICA_URL={{ lookup('tls', application_id, 'url.base') }}
HOSTNAME={{ domains | get_domain(application_id) }}
FRIENDICA_NO_VALIDATION={{ FRIENDICA_OIDC_ENABLED | bool | string | lower }}

# Debugging
FRIENDICA_DEBUGGING={{ (MODE_DEBUG | bool) | lower }}{{"\n"}}
FRIENDICA_LOGLEVEL={% if MODE_DEBUG | bool %}9{% else %}5{% endif %}{{"\n"}}
FRIENDICA_LOGGER=syslog

# Database Configuration 
MYSQL_HOST=     "{{ lookup('database', application_id, 'host') }}:{{ lookup('database', application_id, 'port') }}"
MYSQL_DATABASE= {{ lookup('database', application_id, 'name') }}
MYSQL_USER=     {{ lookup('database', application_id, 'username') }}
MYSQL_PASSWORD= {{ lookup('database', application_id, 'password') | dotenv_quote }}

{% if SYSTEM_EMAIL_ENABLED | bool %}
# Email Configuration
SMTP=           {{ SYSTEM_EMAIL_HOST }}
SMTP_DOMAIN=    {{ SYSTEM_EMAIL_DOMAIN }}
SMTP_PORT=      {{ SYSTEM_EMAIL_PORT }}
SMTP_AUTH_USER= {{ users['no-reply'].email }}
SMTP_AUTH_PASS= {{ users['no-reply'].tokens['web-app-mailu'] }}
SMTP_TLS=       {{ 'on' if SYSTEM_EMAIL_TLS else 'off' }}
SMTP_STARTTLS=  {{ 'on' if SYSTEM_EMAIL_START_TLS else 'off' }}
SMTP_FROM=      no-reply
{% endif %}

# Administrator Credentials
FRIENDICA_ADMIN_MAIL= {{ users.administrator.email }}
MAILNAME= {{ users.administrator.email }}