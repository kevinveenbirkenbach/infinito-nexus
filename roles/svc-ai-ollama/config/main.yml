docker:
  services:
    ollama:
      shared:             true
      backup:
        no_stop_required: true
      # The following image is required for github actions, because the official image is to huge
      # @see https://hub.docker.com/r/alpine/ollama
      image:              "{{'alpine' if (DOCKER_IN_CONTAINER | bool) else 'ollama'}}/ollama"
      version:            latest
      name:               ollama
      port:               11434
      cpus:               "4.0"
      mem_reservation:    "6g"
      mem_limit:          "8g"
      pids_limit:         2048
  volumes:
    models:     "ollama_models"
  network:      "ollama"
preload_models:
  - "llama3:latest"
  - "mistral:latest"
  - "nomic-embed-text:latest"