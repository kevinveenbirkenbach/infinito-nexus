---
application_id:                 "web-app-moodle"
entity_name:                    "{{ application_id | get_entity_name }}"

# Code & data paths inside the container
BITNAMI_CODE_DIR:               "/opt/bitnami/moodle"
BITNAMI_CODE_LINK:              "/bitnami/moodle"
BITNAMI_DATA_DIR:               "/bitnami/moodledata"

# OIDC plugin dir: /opt/bitnami/moodle/auth/oidc
BITNAMI_OIDC_PLUGIN_DIR:        "{{ [BITNAMI_CODE_DIR, 'auth', 'oidc'] | path_join }}"

BITNAMI_USER:                   "daemon"
BITNAMI_USER_GROUP:             "{{ BITNAMI_USER }}:{{ BITNAMI_USER }}"

MOODLE_CONFIG:                  "/bitnami/moodle/config.php"
MOODLE_IMAGE_CUSTOM:            "{{ entity_name }}_custom"
MOODLE_VERSION:                 "{{ lookup('config', application_id, 'compose.services.moodle.version') }}"
MOODLE_IMAGE:                   "{{ lookup('config', application_id, 'compose.services.moodle.image') }}"
MOODLE_CONTAINER:               "{{ lookup('config', application_id, 'compose.services.moodle.name') }}"
MOODLE_VOLUME_DATA:             "{{ lookup('config', application_id, 'compose.volumes.data') }}"
MOODLE_VOLUME_CODE:             "{{ lookup('config', application_id, 'compose.volumes.code') }}"
MOODLE_OIDC_ENABLED:            "{{ lookup('config', application_id, 'compose.services.oidc.enabled') }}"
