plugin_configuration:
  # signaling_servers: JSON object
  - appid: "spreed"
    configkey: "signaling_servers"
    configvalue: "{{ {
        'servers': [ { 'server': NEXTCLOUD_TALK_SIGNALING_URL, 'verify': True, 'alias': 'primary' } ],
        'secret':  NEXTCLOUD_TALK_SIGNALING_SECRET
      } | to_json }}"

  # stun_servers: JSON array of strings
  - appid: "spreed"
    configkey: "stun_servers"
    configvalue: "{{ [
        NEXTCLOUD_TALK_DOMAIN ~ ':' ~ NEXTCLOUD_TALK_STUN_PORT
      ] | to_json }}"

  # turn_servers: JSON array of objects
  - appid: "spreed"
    configkey: "turn_servers"
    configvalue: "{{ [
        {
          'server': NEXTCLOUD_TALK_DOMAIN ~ ':' ~ NEXTCLOUD_TALK_STUN_PORT ~ '?transport=udp',
          'secret': NEXTCLOUD_TALK_TURN_ONBOARD_SECRET,
          'ttl': 86400,
          'protocols': 'udp,tcp'
        }
      ] | to_json }}"

  # internal secret (plain string)
  - appid: "spreed"
    configkey: "internal_secret"
    configvalue: "{{ NEXTCLOUD_TALK_INTERNAL_SECRET }}"
