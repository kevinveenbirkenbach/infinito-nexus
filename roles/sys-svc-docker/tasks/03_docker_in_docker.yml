- name: Ensure '{{ SYS_SVC_DOCKER_DIR }}' exists
  file:
    path: "{{ SYS_SVC_DOCKER_DIR }}"
    state: directory
    mode: '0755'

- name: Install fuse-overlayfs in container
  ansible.builtin.package:
    name: fuse-overlayfs
    state: present
  notify: docker restart

- name: Configure docker daemon storage driver (container)
  ansible.builtin.copy:
    dest: "{{ SYS_SVC_DOCKER_DAEMON }}"
    src: daemon.json
    mode: "0644"
  notify: docker restart
