features:
  css:                false
server:
  csp:
    flags:
      script-src-elem:
        unsafe-inline:  true
      script-src-attr:
        unsafe-inline:  true
      style-src-attr:
        unsafe-inline:  true
    whitelist:
      frame-ancestors:
        - "*"
      media-src:
        - "blob:"
      font-src:
        - "data:"
  domains:
    canonical:
      - "video.{{ DOMAIN_PRIMARY }}"
    aliases: []
    
docker:
  services:
    oidc:
      enabled: true
      shared: true
    logout:
      enabled: true
    desktop:
      enabled: true
    matomo:
      enabled: true
      shared: true
    redis:
      backup:
        disabled: true
      enabled: true
      cpus: "0.5"
      mem_reservation: "256m"
      mem_limit: "512m"
      pids_limit: 512
    database: 
      shared: true
      type: "postgres"
      enabled: true
    peertube: 
      name:             "peertube"
      version:          "production-bookworm"
      image:            "chocobozzz/peertube"
      backup:
        no_stop_required: true
      cpus: 4
      mem_reservation:  "4g"
      mem_limit:        "8g"
      pids_limit:       2048  # ffmpeg spawnt Threads/Prozesse
  volumes:
    data: peertube_data
    config: peertube_config