##
# All environment variables defined here will only apply if you pass them
# to the OpenProject container in docker-compose.yml under x-op-app -> environment.
# For the examples here this is already the case.
#
# Please refer to our documentation to see all possible variables:
#   https://www.openproject.org/docs/installation-and-operations/configuration/environment/
#
OPENPROJECT_HTTPS={{ lookup('tls', application_id, 'enabled') | string | lower }}
OPENPROJECT_HOST__NAME={{ lookup('domain',application_id) }}
OPENPROJECT_RAILS__RELATIVE__URL__ROOT=
IMAP_ENABLED=false
OPENPROJECT_HSTS={{ lookup('tls', application_id, 'enabled') | string | lower }}
RAILS_CACHE_STORE: "memcache"
OPENPROJECT_CACHE__MEMCACHE__SERVER: "cache:11211"
OPENPROJECT_RAILS__RELATIVE__URL__ROOT: ""

# Database
POSTGRES_PASSWORD={{ lookup('database', application_id, 'password') | dotenv_quote }}
DATABASE_URL="{{ lookup('database', application_id, 'url_full') }}?pool=20&encoding=unicode&reconnect=true"
DB_POOL="{{ OPENPROJECT_DB_POOL }}"
RAILS_MAX_THREADS="{{ OPENPROJECT_RAILS_MAX_THREADS }}"
RAILS_MIN_THREADS=4

# This Openproject Container isn't build for development environments
RAILS_ENV=production
