credentials: {}
docker:
  services:
    oidc:
      enabled: true
      shared: true
    logout:
      enabled: true

    desktop:
      enabled: true
    matomo:
      enabled: true
      shared: true
    redis:
      enabled:            false
      backup:
        disabled: true
    database:
      shared: true
      enabled:            true
      type:               postgres
    xwiki:
      image:              xwiki
      version:            lts-<< defaults_applications[web-app-xwiki].docker.services.database.type >>-tomcat
      name:               xwiki
      backup:
        no_stop_required: true
      cpus:               1.0
      mem_reservation:    1g
      mem_limit:          2g
      pids_limit:         1024
  volumes:
    data:           "xwiki_data"
features:
  css:              true
server:
  csp:
    whitelist:
      worker-src:
        - "blob:"
    flags:
      script-src-attr:
        unsafe-eval:    true
      script-src-elem:
        unsafe-inline:  true
  domains:
    canonical:
      - "x.wiki.{{ DOMAIN_PRIMARY }}"
    aliases: []
rbac:
  roles: {}
ldap:
  local_enabled: true # Allows local login if LDAP is down

plugins:
  oidc:
    enabled: true
    items:
      - id: "org.xwiki.contrib.oidc:oidc-authenticator"
        version: ""

  ldap:
    enabled: false
    items:
      - id: "org.xwiki.contrib.ldap:ldap-authenticator"
        version: "9.15.7"

  # Example for Matomo
  matomo:
    enabled: false
    items:
      - id: "org.xwiki.contrib:matomo"
        version: "1.0"
