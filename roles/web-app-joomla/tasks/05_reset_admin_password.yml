---
# Reset Joomla admin password via CLI (inside the container)
- name: "Reset Joomla admin password (non-interactive CLI)"
  command:
    argv:
      - docker
      - exec
      - "{{ JOOMLA_CONTAINER }}"
      - php
      - "{{ JOOMLA_CLI_FILE }}"
      - user:reset-password
      - "--username"
      - "{{ JOOMLA_USER_NAME }}"
      - "--password"
      - "{{ JOOMLA_USER_PASSWORD }}"
  register: j_password_reset
  no_log: "{{ MASK_CREDENTIALS_IN_LOGS | bool }}"
  changed_when: j_password_reset.rc == 0
