- name: "1) Load the dependencies for the Anisble/Docker network management"
  include_role:
    name:   sys-svc-docker
    public: false
  when: run_once_sys_svc_docker is not defined

- name: "2) Create the network"
  community.docker.docker_network:
    name: "{{ docker_network_name }}"
    state: present
    ipam_config:
      - subnet: "{{ docker_network_subnet }}"

- name: "3) Include and flush the compose which requires the network"
  include_role:
    name: docker-compose
  vars:
    docker_compose_flush_handlers: true
