- name: "include docker-compose role"
  include_role:
    name: docker-compose
  vars:
    docker_compose_flush_handlers: true

- name: Create docker network
  community.docker.docker_network:
    name: "{{ docker_network_name }}"
    state: present
    ipam_config:
      - subnet: "{{ docker_network_subnet }}"

- name: Flush docker handlers after network is created
  meta: flush_handlers