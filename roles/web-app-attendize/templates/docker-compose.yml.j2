{% include 'roles/docker-compose/templates/base.yml.j2' %}

  web:
    image: "{{ ATTENDIZE_WEB_IMAGE }}:{{ ATTENDIZE_WEB_VERSION }}"
    ports:
    - "{{ ports.localhost.http[application_id] }}:80"
    volumes:
      - .:/usr/share/nginx/html
      - .:/var/www
{% include 'roles/docker-container/templates/depends_on/dmbs_incl.yml.j2' %}
      maildev:
      worker:
    env_file:
      - ./.env
{% include 'roles/docker-container/templates/networks.yml.j2' %}

  worker:
    image: "{{ ATTENDIZE_WORKER_IMAGE }}:{{ ATTENDIZE_WORKER_VERSION }}"
{% include 'roles/docker-container/templates/depends_on/dmbs_incl.yml.j2' %}
      maildev:
{% include 'roles/docker-container/templates/networks.yml.j2' %}
    volumes:
      - .:/usr/share/nginx/html
      - .:/var/www

{% include 'roles/docker-compose/templates/volumes.yml.j2' %}

{% include 'roles/docker-compose/templates/networks.yml.j2' %}