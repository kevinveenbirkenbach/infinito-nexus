load_dependencies:    True  # When set to false the dependencies aren't loaded. Helpful for developing
actions:
  import_realm:       True  # Import REALM
features:
  css:                true
  recaptcha:          "{{ RECAPTCHA_ENABLED | bool }}"

  # Doesn't make sense to activate logout page for keycloak, because the logout page 
  # anyhow should be included via iframe in keycloak.
  # The JS is also messing with the keycloak config fields
  # @todo optimize the JS
server:
  csp:
    flags:
      script-src-elem:
        unsafe-inline: true
      script-src-attr:
        unsafe-inline: true
      style-src-attr:
        unsafe-inline: true
    whitelist:
      frame-src:
        - "*" # For frontend channel logout it's necessary that iframes can be loaded
  domains:
    canonical:
      - "auth.{{ DOMAIN_PRIMARY }}"
    aliases: []
scopes:
  nextcloud:  nextcloud

docker:
  services:
    logout:
      enabled: false
      shared: false
    ldap:
      enabled: true
      shared: true
    desktop:
      enabled: true
      shared: true
    matomo:
      enabled: true
      shared: true
    keycloak:
      image:            "quay.io/keycloak/keycloak"
      version:          "latest"
      name:             "keycloak"
      cpus:             "2.0"
      mem_reservation:  "2g"
      mem_limit:        "4g"
      pids_limit:       1024
    database:
      shared: true
      type: "postgres"
      enabled: true
credentials:
  recaptcha:
    key:      "{{ CAPTCHA.RECAPTCHA.KEY | default('') }}"
    secret:   "{{ CAPTCHA.RECAPTCHA.SECRET | default('') }}"
accounts:
  bootstrap:
    username: "administrator"
  system:
    username: "{{ SOFTWARE_NAME | replace('.', '_') | lower }}"