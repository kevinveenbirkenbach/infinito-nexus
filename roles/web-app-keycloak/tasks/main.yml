---
- name: "Load meta"
  include_tasks: 01_meta.yml
  when: not KEYCLOAK_LOAD_DEPENDENCIES | bool

- name: "Load cleanup routine for '{{ application_id }}'"
  include_tasks: 02_cleanup.yml

- name: "Load init routine for '{{ application_id }}'"
  include_tasks: 03_init.yml

- name: "Load the depdendencies required by '{{ application_id }}'"
  include_tasks: 04_dependencies.yml
  when: KEYCLOAK_LOAD_DEPENDENCIES | bool

- name: "Load Login routines for '{{ application_id }}'"
  include_tasks: 05_login.yml

- name: "Load Client Update routines for '{{ application_id }}'"
  include_tasks: update/01_client.yml

- name: "Load Mail Update routines for '{{ application_id }} - {{ KEYCLOAK_REALM }}'"
  include_tasks: update/02_mail_realm.yml

- name: "Load Mail Update routines for '{{ application_id }} - master'"
  include_tasks: update/03_mail_master.yml

- name: "Load RBAC Update routines for '{{ application_id }}'"
  include_tasks: update/04_rbac_client_scope.yml

- name: "Load LDAP Update routines for '{{ application_id }}'"
  include_tasks: update/05_ldap.yml
  when: KEYCLOAK_LDAP_ENABLED | bool

- name: "Load reCAPTCHA Update routines for '{{ application_id }}'"
  include_tasks: update/06_recaptcha.yml
  when: KEYCLOAK_RECAPTCHA_ENABLED | bool
