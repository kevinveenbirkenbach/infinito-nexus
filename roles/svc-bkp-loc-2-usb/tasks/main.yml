- block:
  - name: Include dependencies
    include_role:
      name: '{{ item }}'
    loop:
    - sys-ctl-cln-bkps
    - sys-lock
  - include_tasks: utils/run_once.yml
  when: run_once_svc_bkp_loc_2_usb is not defined

- name: Fail if any backup_to_usb variable is empty
  assert:
    that:
    - BACKUP_TO_USB_MOUNT != ""
    - BACKUP_TO_USB_target != ""
    - BACKUP_TO_USB_SOURCE != ""
    fail_msg: |
      One or more of the configuration variables are empty!
      Please set:
        - mount
        - target
        - source
      to nonâ€‘empty values in your configuration file.

- include_role:
    name: sys-service
