docker:
  services:
    database:
      enabled: true
    synapse: 
      version:          latest 
      image:            matrixdotorg/synapse
      name:             matrix-synapse
      backup:
        no_stop_required: true
    element: 
      version:        latest 
      image:          vectorim/element-web
      name:           matrix-element
  volumes: 
    synapse:          "matrix_synapse_data"
playbook_tags:        "setup-all,start"                  # For the initial update use: install-all,ensure-matrix-users-created,start
server_name:          "{{ PRIMARY_DOMAIN }}"             # Adress for the account names etc.
setup:                false                              # Set true in inventory file to execute the setup and initializing procedures
features:
  matomo:             false                              # Deactivated, because in html CSP restricts use
  css:                true
  desktop:            true
  oidc:               true                               # Deactivated OIDC due to this issue https://github.com/matrix-org/synapse/issues/10492
  central_database:   true
  logout:             true
server:
  csp:
    flags:
      script-src-attr:
        unsafe-eval:   true
      script-src-elem:
        unsafe-inline: true
        unsafe-eval:   true
      style-src-attr:
        unsafe-inline: true
    whitelist:
      connect-src:
        - "*"
      script-src-elem:
        - "element.{{ PRIMARY_DOMAIN }}"
        - "https://cdn.jsdelivr.net"
  domains:
    canonical:
      synapse: "matrix.{{ PRIMARY_DOMAIN }}"
      element: "element.{{ PRIMARY_DOMAIN }}"
  client_max_body_size: "15M"

plugins:
# You need to enable them in the inventory file
  chatgpt:    false
  facebook:   false
  immesage:   false
  instagram:  false
  signal:     false
  slack:      false
  telegram:   false
  whatsapp:   false
