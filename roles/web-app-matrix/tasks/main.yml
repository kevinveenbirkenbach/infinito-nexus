---
- name: Load bridges configuration
  include_vars:
    file: "bridges.yml"

- name: Filter enabled bridges and register as fact
  set_fact:
    MATRIX_BRIDGES: "{{ bridges_configuration | filter_enabled_bridges(applications | get_app_conf(application_id, 'plugins', True)) }}"
  changed_when: false

# Order of the following tasks is important otherwise handlers are flushed wrongly

- name: "Include Docker Tasks for '{{ application_id }}'"
  include_tasks: 01_docker.yml

- name: "Include Webserver Tasks for '{{ application_id }}'"
  include_tasks: 03_webserver.yml