---
- name: "Check if {{ PATH_DOCKER_COMPOSE_INSTANCES }} directory exists"
  stat:
    path: "{{ PATH_DOCKER_COMPOSE_INSTANCES }}"
  register: docker_compose_directory_stat

- name: "Update with pacman"
  include_role:
    name: update-pacman
  when: 
    - ansible_facts['distribution'] == 'Archlinux'
    - run_once_update_pacman is not defined
  
- name: "Update with apt"
  include_role:
    name: update-apt
  when: 
    - ansible_facts['distribution'] == "Debian"
    - run_once_update_apt is not defined

- include_tasks: utils/once_finalize.yml