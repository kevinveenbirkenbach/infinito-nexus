server:
  status_codes:
    default:
      - 308
      - 302
  domains:
    canonical:
      - "onlyoffice.{{ PRIMARY_DOMAIN }}"
    aliases: []
  csp:
    whitelist:
      frame-ancestors:
        - "{{ WEB_PROTOCOL }}://*.{{ PRIMARY_DOMAIN }}"
      script-src-elem:
        - "https://fonts.googleapis.com"
      style-src-elem:
        - "https://fonts.googleapis.com"
      font-src:
        - "https://fonts.gstatic.com"
    flags:
      script-src-attr:
        unsafe-inline:  true
      script-src-elem:
        unsafe-inline:  true
        unsafe-eval:    true
docker:
  services:
    redis:
      enabled: true
    database:
      enabled: true
    onlyoffice:
      image:            "onlyoffice/documentserver"
      version:          "latest"
      name:             "onlyoffice"
      cpus:             2
      mem_reservation:  "1g"
      mem_limit:        "2g"
      pids_limit:       2048
  volumes:
    data:         onlyoffice_data          # /var/www/onlyoffice/Data
    logs:         onlyoffice_logs          # /var/log/onlyoffice
    fonts:        onlyoffice_fonts         # /usr/share/fonts/truetype/custom
    lib:          onlyoffice_lib           # /var/lib/onlyoffice
    rabbitmqdata: onlyoffice_rabbitmqdata  # /var/lib/rabbitmq
    
    # The redis and db volume are just dummy volumes and aren't used 
    pgdata:       onlyoffice_pgdata        # /var/lib/postgresql
    redisdata:    onlyoffice_redisdata     # /var/lib/redis
features:
  logout:           false
  desktop:          true
  matomo:           true
  css:              true
  central_database: true
