- name: "loading database configuration variables"
  include_vars:
    file: "{{ role_path }}/vars/db_config.yml"

- name: "Render servers.json file"
  template:
    src: servers.json.j2
    dest: "{{ pgadmin_host_server_file }}"
    mode: "0644"
  notify: compose up

- name: "Render .pgpass file"
  template:
    src: pgpass.j2
    dest: "{{ pgadmin_host_password_file }}"
    owner: "{{ PGADMIN_USER }}"
    group: "{{ PGADMIN_GROUP }}"
    mode: "0600"
  notify: compose up
