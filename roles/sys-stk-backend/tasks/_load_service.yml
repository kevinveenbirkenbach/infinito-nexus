- name: "SYS-STK-BACKEND | Compute load flag for '{{ service_id }}' (enabled && shared)"
  ansible.builtin.set_fact:
    load_service: >-
      {{
        (applications | service_load_enabled(application_id, service_name, False))
        and
        (vars['run_once_' ~ (service_id | replace('-', '_'))] is not defined)
        and 
        (application_id != service_id)
      }}

- name: "SYS-STK-BACKEND | Load '{{ service_id }}' (Once)"
  ansible.builtin.include_tasks: "utils/load_app.yml"
  vars:
    load_app_id: "{{ service_id }}"
  when: load_service | bool
