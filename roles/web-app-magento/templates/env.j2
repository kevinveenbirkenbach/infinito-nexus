# Magento environment
# Base references:
# - https://github.com/bitnami/containers/tree/main/bitnami/magento

# Host & URLs
MAGENTO_HOST="{{ domains | get_domain(application_id) }}"
MAGENTO_BASE_URL="{{ domains | get_url(application_id, WEB_PROTOCOL) }}/"
MAGENTO_ENABLE_HTTPS={{ (WEB_PORT == 443) | string | lower }}

# Admin (seed from global administrator)
MAGENTO_USERNAME="{{ users.administrator.username }}"
MAGENTO_PASSWORD="{{ applications | get_app_conf(application_id, 'credentials.admin_password') }}"
MAGENTO_EMAIL="{{ users.administrator.email }}"
MAGENTO_FIRST_NAME="{{ users.administrator.firstname | default('Admin') }}"
MAGENTO_LAST_NAME="{{ users.administrator.lastname  | default('User') }}"

# Database (central DB preferred)
MARIADB_HOST="{{ database_host }}"
MARIADB_PORT_NUMBER="{{ database_port }}"
MAGENTO_DATABASE_USER="{{ database_username }}"
MAGENTO_DATABASE_PASSWORD="{{ database_password }}"
MAGENTO_DATABASE_NAME="{{ database_name }}"

# Search (Magento 2.4+)
MAGENTO_SEARCH_ENGINE="opensearch"
OPENSEARCH_HOST="search"
OPENSEARCH_PORT_NUMBER="9200"

# SMTP
SMTP_HOST="{{ SYSTEM_EMAIL.HOST }}"
SMTP_PORT="{{ SYSTEM_EMAIL.PORT }}"
SMTP_USER="{{ users['no-reply'].email }}"
SMTP_PASSWORD="{{ users['no-reply'].mailu_token }}"
SMTP_PROTOCOL={{ SYSTEM_EMAIL.TLS | ternary('tls','ssl') }}

# Misc
ALLOW_EMPTY_PASSWORD="no"
BITNAMI_DEBUG="false"
PHP_MEMORY_LIMIT="1024M"
