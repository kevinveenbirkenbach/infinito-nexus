---
- name: "load docker, db and proxy for '{{ application_id }}'"
  include_role:
    name: sys-stk-full
  vars:
    docker_compose_flush_handlers: false

- name: "Load install procedures for '{{ application_id }}''"
  include_tasks: 01_install.yml

- name: "flush handlers for '{{ application_id }}' after configuration deployment"
  meta: flush_handlers

- name: "Load extensions procedures for '{{ application_id }}''"
  include_tasks: "02_extensions.yml"
  when: MEDIAWIKI_OIDC_ENABLED | bool

- name: "flush handlers for '{{ application_id }}' after preparation finished"
  meta: flush_handlers

- name: "Load admin setup procedures for '{{ application_id }}''"
  include_tasks: 03_admin.yml


