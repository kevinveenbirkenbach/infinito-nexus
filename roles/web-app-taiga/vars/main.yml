# General 
application_id:                 "web-app-taiga"
js_application_name:            "Taiga"
entity_name:                    "{{ application_id | get_entity_name }}"

# Taiga      

## General
TAIGA_EMAIL_BACKEND:            "{{ 'smtp' if SYSTEM_EMAIL_SMTP else 'console' }}"  ## use an SMTP server or display the emails in the console (either "smtp" or "console")

## User
TAIGA_SUPERUSER_NAME:           "{{ users.administrator.username }}"
TAIGA_SUPERUSER_PASSWORD:       "{{ users.administrator.password }}"
TAIGA_SUPERUSER_EMAIL:          "{{ users.administrator.email }}"

## OIDC
TAIGA_OIDC_ENABLED:             "{{ lookup('config', application_id, 'docker.services.oidc.enabled') }}"
TAIGA_OIDC_FLAVOR:              "{{ lookup('config', application_id, 'oidc.flavor') }}"
TAIGA_FLAVOR_ROBROTHERAM:       "{{ TAIGA_OIDC_FLAVOR == 'robrotheram' }}"
TAIGA_ROBROTHERAM_ENABLED:      "{{ TAIGA_OIDC_ENABLED and TAIGA_FLAVOR_ROBROTHERAM }}"
TAIGA_FLAVOR_TAIGAIO:           "{{ TAIGA_OIDC_FLAVOR == 'taigaio' }}"
TAIGA_TAIGAIO_ENABLED:          "{{ TAIGA_OIDC_ENABLED and TAIGA_FLAVOR_TAIGAIO }}"

## Docker
TAIGA_COMPOSE_INIT_PATH:        "{{ [ lookup('docker', application_id, 'directories.instance'),'docker-compose-inits.yml' ] | path_join }}"
TAIGA_DOCKER_IMAGE_BACKEND:     "{{ 'robrotheram/taiga-back-openid' if TAIGA_ROBROTHERAM_ENABLED else 'taigaio/taiga-back' }}"
TAIGA_DOCKER_IMAGE_FRONTEND:    "{{ 'robrotheram/taiga-front-openid' if TAIGA_ROBROTHERAM_ENABLED else 'taigaio/taiga-front' }}"
TAIGA_FRONTEND_CONF_PATH:       "{{ [ lookup('docker', application_id, 'directories.config'),'conf.json' ] | path_join }}"
TAIGA_VERSION:                  "{{ lookup('config', application_id, 'docker.services.taiga.version') }}"

### Backend
TAIGA_SERVICE:                  "{{ entity_name }}"
TAIGA_HOSTNAME:                 "taiga-back"
TAIGA_CONTAINER:                "{{ entity_name }}"
TAIGA_VOLUME_MEDIA:             "/taiga-back/media"
TAIGA_VOLUME_STATIC:            "/taiga-back/static"

## Services 
TAIGA_MANAGER_SERVICE:          "manager"
TAIGA_ASYNC_SERVICE:            "async"
TAIGA_ASYNC_RABBITMQ_SERVICE:   "async-rabbitmq"
TAIGA_EVENTS_RABBITMQ_SERVICE:  "events-rabbitmq"
TAIGA_FRONT_SERVICE:            "front"
TAIGA_EVENTS_SERVICE:           "events"

TAIGA_SETTING_FILES:            ['urls','local']
