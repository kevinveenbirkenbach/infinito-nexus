
- name: "reset (if enabled)"
  include_tasks: 01_reset.yml 
  when: MODE_RESET | bool and run_once_sys_timer is not defined

- name: run {{ role_name }} once
  set_fact:
    run_once_sys_timer: true
  when: run_once_sys_timer is not defined

- name: create {{ sys_timer_file }}
  template:
    src: dummy.timer.j2
    dest: "/etc/systemd/system/{{ sys_timer_file }}"
  register: dummy_timer

- name: "restart timer"
  systemd:
    daemon_reload: yes
    name: "{{ sys_timer_file }}"
    state: restarted
    enabled: yes
  when: dummy_timer.changed or ACTIVATE_ALL_TIMERS | bool

