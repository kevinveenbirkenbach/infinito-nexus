# General 
application_id:     "web-app-snipe-it"
entity_name:        "{{ application_id | get_entity_name }}"

# Database
database_password:  "{{ applications | get_app_conf(application_id, 'credentials.database_password') }}"

# Snipe-IT specific
SNIPE_IT_URL:       "{{ lookup('tls_resolve', application_id, want='url.base') }}"
SNIPE_IT_VERSION:   "{{ applications | get_app_conf(application_id, 'docker.services.snipe-it.version') }}"
SNIPE_IT_IMAGE:     "{{ applications | get_app_conf(application_id, 'docker.services.snipe-it.image') }}"
SNIPE_IT_CONTAINER: "{{ applications | get_app_conf(application_id, 'docker.services.snipe-it.name') }}"
SNIPE_IT_VOLUME:    "{{ applications | get_app_conf(application_id, 'docker.volumes.data') }}"
SNIPE_IT_SERVICE:   "{{ entity_name }}"
SNIPE_IT_APP_KEY:   "{{ applications | get_app_conf(application_id, 'credentials.app_key') }}"

# Authentification
SNIPE_IT_LDAP_ENABLED:            "{{ applications | get_app_conf(application_id, 'docker.services.ldap.enabled') }}"
SNIPE_IT_TLS_ENABLED:             "{{ lookup('tls_resolve', application_id, want='enabled') | bool }}"

#LDAP
SNIPE_IT_LDAP_FILTER_FRAGMENT:    "&(objectClass=inetOrgPerson)"
SNIPE_IT_LDAP_AUTH_FILTER_QUERY:  "{{ LDAP.USER.ATTRIBUTES.ID }}="
