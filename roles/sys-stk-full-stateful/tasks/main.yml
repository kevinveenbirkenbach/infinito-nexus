# run_once_sys_stk_full_stateful: deactivated

- include_tasks: "{{ [ playbook_dir, 'tasks/utils/load_handlers.yml' ] | path_join }}"
  vars:
    handler_role_name: "svc-prx-openresty"

- name: "For '{{ application_id }}': include role sys-stk-front-proxy"
  include_role:
    name: sys-stk-front-proxy
  vars:
    domain:     "{{ domains | get_domain(application_id) }}"
    http_port:  "{{ ports.localhost.http[application_id] }}"

- name: "For '{{ application_id }}': load docker and db"
  include_role:
    name: sys-stk-back-stateful
