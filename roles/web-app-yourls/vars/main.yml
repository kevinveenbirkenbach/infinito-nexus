# General
application_id:                 "web-app-yourls"
database_type:                  "mariadb"

# Webserver
proxy_extra_configuration:      "{{ lookup('template', 'redirect.conf.j2') }}"

# Yourls
YOURLS_USER:                    "{{ applications | get_app_conf(application_id, 'users.administrator.username') }}"
YOURLS_PASSWORD:                "{{ applications | get_app_conf(application_id, 'credentials.administrator_password') }}"
YOURLS_VERSION:                 "{{ applications | get_app_conf(application_id, 'docker.services.yourls.version') }}"
YOURLS_IMAGE:                   "{{ applications | get_app_conf(application_id, 'docker.services.yourls.image') }}"
YOURLS_CONTAINER:               "{{ applications | get_app_conf(application_id, 'docker.services.yourls.name') }}"
YOURLS_ADMIN_LOCATION:          "{{ applications | get_app_conf(application_id, 'server.locations.admin') }}"
YOURLS_LANDINGPAGE_STATUS_CODE: "{{ applications | get_app_conf(application_id, 'server.status_codes.default') }}"

# Container
container_port:                 8080
container_healthcheck:          "{{ (YOURLS_ADMIN_LOCATION | regex_replace('^/+', '') | regex_replace('/+$', '')) ~ '/' }}"
