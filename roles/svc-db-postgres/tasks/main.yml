- block:
  - include_tasks: 01_core.yml
    vars:
      # Force the flush of the pg handler on the first run
      flush_handlers: true
  when: run_once_svc_db_postgres is not defined

- include_tasks: "{{ [ playbook_dir, 'tasks/utils/load_handlers.yml' ] | path_join }}"
  # Necessary because docker handlers are overwritten by condition
  vars:
    handler_role_name: "docker-compose"

- name: "Initialize database for '{{ database_name }}'"
  include_tasks: 02_init.yml
  when: POSTGRES_INIT | bool