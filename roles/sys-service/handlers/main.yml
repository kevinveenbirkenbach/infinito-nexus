- name: "Enable systemctl service"
  systemd:
    name: "{{ system_service_id | get_service_name(SOFTWARE_NAME) }}"
    enabled: yes
    daemon_reload: true
  become: true
  async:  "{{ ASYNC_TIME if ASYNC_ENABLED | bool else omit }}"
  poll:   "{{ ASYNC_POLL if ASYNC_ENABLED | bool else omit }}"
  listen: refresh systemctl service

- name: "Set systemctl service state"
  systemd:
    name: "{{ system_service_id | get_service_name(SOFTWARE_NAME) }}"
    state: "{{ system_service_state }}"
  become: true
  async:  "{{ ASYNC_TIME if ASYNC_ENABLED | bool else omit }}"
  poll:   "{{ ASYNC_POLL if ASYNC_ENABLED | bool else omit }}"
  when:   not (system_service_suppress_flush | bool)
  listen: refresh systemctl service