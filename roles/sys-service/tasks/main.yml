- name: "Reload sys-daemon handlers"
  include_tasks: "{{ playbook_dir }}/tasks/utils/load_handlers.yml"
  vars:
    handler_role_name: "sys-daemon"
  when: run_once_sys_service is defined

- block:
  - include_tasks: 01_core.yml
  - include_tasks: utils/run_once.yml
  when: run_once_sys_service is not defined

- name: "Execute service routines for '{{ system_service_id }}'"
  block:
    - name: "Load base routine for '{{ system_service_id }}'"
      include_tasks: 03_base.yml
    - name: "Flush system service handlers for '{{ system_service_id }}'"
      meta: flush_handlers
  when: system_service_id is defined
