- block:
    - name: Install GCC compiler and runtime (cross-distro)
      ansible.builtin.package:
        name: >-
          {{
            (ansible_distribution == 'Archlinux')
            | ternary(
                ['gcc', 'gcc-libs'],
                {
                  'Debian': ['gcc', 'libstdc++6'],
                  'RedHat': ['gcc', 'libstdc++']
                }[ansible_os_family]
              )
          }}
        state: present

    - ansible.builtin.set_fact:
        run_once_dev_gcc: true
  when: run_once_dev_gcc is not defined