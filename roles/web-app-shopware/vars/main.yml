# General
application_id:                 "web-app-shopware"
entity_name:                    "{{ application_id | get_entity_name }}"

# Docker
container_port:                 "{{ applications | get_app_conf(application_id, 'docker.services.web.port') }}"

SHOPWARE_DOMAIN:                "{{ domains | get_domain(application_id) }}"

# Shopware container/image vars
SHOPWARE_VERSION:               "{{ applications | get_app_conf(application_id, 'docker.services.shopware.version') }}"
SHOPWARE_IMAGE:                 "{{ applications | get_app_conf(application_id, 'docker.services.shopware.image') }}"
SHOPWARE_CUSTOM_IMAGE:          "shopware_custom"
SHOPWARE_VOLUME:                "{{ applications | get_app_conf(application_id, 'docker.volumes.data') }}"
SHOPWARE_USER:                  "www-data"
SHOPWARE_ROOT:                  "/var/www/html"

SHOPWARE_PHP_VERSION:           "{{ applications | get_app_conf(application_id, 'docker.services.php.version') }}"
SHOPWARE_PHP_IMAGE:             "{{ applications | get_app_conf(application_id, 'docker.services.php.image') }}"

# Split service container names
SHOPWARE_INIT_CONTAINER:        "{{ applications | get_app_conf(application_id, 'docker.services.init.name') }}"
SHOPWARE_WEB_CONTAINER:         "{{ applications | get_app_conf(application_id, 'docker.services.web.name') }}"
SHOPWARE_WORKER_CONTAINER:      "{{ applications | get_app_conf(application_id, 'docker.services.worker.name') }}"
SHOPWARE_SCHED_CONTAINER:       "{{ applications | get_app_conf(application_id, 'docker.services.scheduler.name') }}"
SHOPWARE_INIT_HOST:             "{{ [ docker_compose.directories.volumes, 'init.sh' ] | path_join }}"
SHOPWARE_INIT_DOCKER:           "/usr/local/bin/init.sh"
SHOPWARE_FRAMEWORK_HOST:        "{{ [ docker_compose.directories.config, 'framework.yaml' ] | path_join }}"
SHOPWARE_FRAMEWORK_DOCKER:      "/var/www/html/config/packages/framework.yaml"

# Entrypoints & replicas
SHOPWARE_WORKER_ENTRYPOINT:     "{{ applications | get_app_conf(application_id, 'docker.services.worker.entrypoint') }}"
SHOPWARE_SCHED_ENTRYPOINT:      "{{ applications | get_app_conf(application_id, 'docker.services.scheduler.entrypoint') }}"
SHOPWARE_WORKER_REPLICAS:       "{{ applications | get_app_conf(application_id, 'docker.services.worker.replicas') }}"

# Redis Cache
SHOPWARE_REDIS_ENABLED:               "{{ applications | get_app_conf(application_id, 'docker.services.redis.enabled') }}"
SHOPWARE_REDIS_ADDRESS:               "redis:6379"

# Opensearch
SHOPWARE_OPENSEARCH_PORT:                   "9200"
SHOPWARE_OPENSEARCH_ENABLED:                "{{ applications | get_app_conf(application_id, 'docker.services.opensearch.enabled') }}"
SHOPWARE_OPENSEARCH_IMAGE:                  "{{ applications | get_app_conf(application_id, 'docker.services.opensearch.image') }}"
SHOPWARE_OPENSEARCH_VERSION:                "{{ applications | get_app_conf(application_id, 'docker.services.opensearch.version') }}"
SHOPWARE_OPENSEARCH_CONTAINER:              "{{ applications | get_app_conf(application_id, 'docker.services.opensearch.name') }}"
SHOPWARE_OPENSEARCH_MEM_RESERVATION:        "{{ applications | get_app_conf(application_id, 'docker.services.opensearch.mem_reservation') }}"
SHOPWARE_OPENSEARCH_INITIAL_ADMIN_PASSWORD: "{{ applications | get_app_conf(application_id, 'credentials.opensearch_initial_admin_password') }}"
