title:                            "{{ SOFTWARE_NAME }} Shop"
features:
  central_database:               true
  redis:                          true
  ldap:                           false # Not implemented yet
  oidc:                           false # Not implemented yet
  logout:                         true
server:
  csp:
    flags: {}
    whitelist: {}
  domains:
    aliases: []
    canonical:
      - shop.{{ PRIMARY_DOMAIN }}
docker:
  services:
    database:
      enabled: true

    init:
      name: software-init
      cpus: 1.0
      mem_reservation: 1g
      mem_limit: 2g


    # Base PHP image used by all app services
    shopware:
      image: "ghcr.io/shopware/docker-base"
      version: "8.3"

    web:
      name: "shopware-web"
      port: 8000
      cpus: 1.0
      mem_reservation: 1g
      mem_limit: 2g

    worker:
      name: "shopware-worker"
      entrypoint: [ "php", "bin/console", "messenger:consume", "async", "low_priority", "--time-limit=300", "--memory-limit=512M" ]
      replicas: 3
      cpus: 1.0
      mem_reservation: 1g
      mem_limit: 2g

    scheduler:
      name: "shopware-scheduler"
      entrypoint: [ "php", "bin/console", "scheduled-task:run" ]
      cpus: 0.5
      mem_reservation: 512m
      mem_limit: 1g

    redis:
      enabled: true
      image: "redis"
      version: "7-alpine"
      cpus: 0.25
      mem_reservation: 256m
      mem_limit: 512m

    opensearch:
      enabled: true
      image: "opensearchproject/opensearch"
      version: "2.12.0"
      name: "shopware-opensearch"
      cpus: 1.0
      mem_reservation: 2g
      mem_limit: 4g

  volumes:
    data: "shopware_data"
