- name: Ensure '{{ SYS_SVC_DOCKER_DIR }}' exists
  file:
    path: "{{ SYS_SVC_DOCKER_DIR }}"
    state: directory
    mode: '0755'

- name: Install fuse-overlayfs in container
  ansible.builtin.package:
    name: fuse-overlayfs
    state: present
  notify: docker restart

- name: Compute and set Docker daemon MTU (container)
  include_tasks: "_mtu.yml"

- name: Configure docker daemon storage driver (container)
  ansible.builtin.template:
    src: daemon.json.j2
    dest: "{{ SYS_SVC_DOCKER_DAEMON }}"
    mode: "0644"
  notify: docker restart
